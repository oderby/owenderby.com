<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Blog-rsses on Owen Derby</title>
    <link>https://owenderby.com/blog/index.xml</link>
    <description>Recent content in Blog-rsses on Owen Derby</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-US</language>
    <lastBuildDate>Fri, 07 Apr 2017 14:10:12 -0800</lastBuildDate>
    <atom:link href="https://owenderby.com/blog/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>An examination of 2016 Election Results in Pennsylvania - Part 2</title>
      <link>https://owenderby.com/blog/election_2016_pa_p2/</link>
      <pubDate>Fri, 07 Apr 2017 14:10:12 -0800</pubDate>
      
      <guid>https://owenderby.com/blog/election_2016_pa_p2/</guid>
      <description>

&lt;p&gt;&lt;em&gt;This is the second post in a two-part series, examining presidential election
results from Pennsylvania. If you haven&amp;rsquo;t
read &lt;a href=&#34;https://owenderby.com/blog/election_2016_pa_p1/&#34; target=&#34;_blank&#34;&gt;Part 1&lt;/a&gt; yet, you should start
there.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;In my first post, we examined election data from 2016 (and some from 2012) and
uncovered some interesting results on what Trump did right. Nevertheless, many
people (myself included and, arguably, a majority of the US population) were
surprised by the election results. At this point I became curious: should we
have been surprised? Was this apparent sweep truly unprecedented? After all, we
heard a lot about how this was the first year in a long time that Pennsylvania
&amp;ldquo;went red&amp;rdquo;, but how did this year actually stack up against previous elections?&lt;/p&gt;

&lt;p&gt;To shed some light on these questions, we can take a more comprehensive look at
data from previous elections. So, I gathered county-level results for every
presidential election in Pennsylvania since 1996&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:5&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:5&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;, and registration data
since 2000. In this post, we re-examine several of the metrics discussed in Part
1 for previous elections, to see if there are larger trends that have been at
play in Pennsylvania elections.&lt;/p&gt;

&lt;!--
Unlike part 1, which had more of a direct
narrative for the data presented, this post is a bit more spread out, presenting
several disparate results I found interesting. Also, this analysis is
necessarily more open-ended, because as we look backwards, demographic and other
external trends play larger roles in the data, which I haven&#39;t accounted for, so
I&#39;m reticent to draw any conclusions from this data alone.
!--&gt;

&lt;h2 id=&#34;historical-election-results&#34;&gt;Historical Election Results&lt;/h2&gt;

&lt;p&gt;We start with a look at the voting results from all elections since 1996.&lt;/p&gt;

&lt;figure  style=&#34;width:100%&#34; &gt;
    &lt;a href=&#34;https://owenderby.com/img/election_16/pa/hist_results.png&#34; target=&#34;_blank&#34;&gt;
      &lt;img src=&#34;https://owenderby.com/img/election_16/pa/hist_results.png&#34; width=&#34;100%&#34;/&gt;
    &lt;/a&gt;
    
    &lt;figcaption&gt;
      
      &lt;p&gt;
         Fig 1. Three different
ways of visualizing the normalized marginal votes by county from elections
1996-2016: Tukey boxplots (left), on a map (center) and as stacked bar charts,
by candidate (right). The boxplots and map show the normalized marginal votes
(as a percentage), while the bar charts show total marginal votes. 
      &lt;/p&gt;
      
    &lt;/figcaption&gt;
    
&lt;/figure&gt;


&lt;p&gt;While it&amp;rsquo;s tempting to see Trump&amp;rsquo;s victory as an anomaly (the &amp;ldquo;first time in
recent history Pennsylvania has gone red&amp;rdquo; perspective), Figure 1 tells a more
nuanced story. Indeed, the first thing you should notice is the gradual yet
steady shift across the state towards the right since the 1996 election. From
this perspective, 2008 appears to be the anomaly. It&amp;rsquo;s the only election when
the distribution of marginal votes actually shifted slightly back to the
left. To achieve this, Obama won an extraordinary number of additional marginal
votes while McCain lost around 100,000. Every other year, we see the number of
marginal votes for Republicans steadily rising while Democrats maintain. In
2016, Trump managed to make two elections&amp;rsquo; worth of gains in one, and how he did
that was the focus of the first part of this series.&lt;/p&gt;

&lt;p&gt;This trend to the right is reinforced by examining flipped counties. With the
exception of Chester county in 2016, 2008 is the only year since 1996 when any
county flipped Democrat. That means that since 1996, a net of 17 counties have
flipped from voting Democrat (in 1996) to Republican (in 2016).&lt;/p&gt;

&lt;figure  style=&#34;width:100%&#34; &gt;
    &lt;a href=&#34;https://owenderby.com/img/election_16/pa/hist_d_results.png&#34; target=&#34;_blank&#34;&gt;
      &lt;img src=&#34;https://owenderby.com/img/election_16/pa/hist_d_results.png&#34; width=&#34;100%&#34;/&gt;
    &lt;/a&gt;
    
    &lt;figcaption&gt;
      
      &lt;p&gt;
         Fig 2. Visualizing
changes in normalized marginal votes for years 1996-2016 with: Tukey boxplots
(left) and on a map (right). In each map, every county is colored according to
its shift in normalized marginal votes from the previous year. Counties in which
votes shifted away from the winning candidate have been shaded. 
      &lt;/p&gt;
      
    &lt;/figcaption&gt;
    
&lt;/figure&gt;


&lt;p&gt;I provide Figure 2 simply because it is the clearest way of seeing how
widespread the shift to the right has been in the state, even amongst counties
which continue voting Democrat. Also, I found it surprising how most of the
counties exhibit shifts of &amp;gt;3% every year, and most often in the same direction
for each election.&lt;/p&gt;

&lt;figure  style=&#34;width:100%&#34; &gt;
    &lt;a href=&#34;https://owenderby.com/img/election_16/pa/results_IV_years.png&#34; target=&#34;_blank&#34;&gt;
      &lt;img src=&#34;https://owenderby.com/img/election_16/pa/results_IV_years.png&#34; width=&#34;100%&#34;/&gt;
    &lt;/a&gt;
    
    &lt;figcaption&gt;
      
      &lt;p&gt;
         Fig 3. Plotting
percentage of votes for independent candidates (left) and its difference
(right) from the elections in 1996-2016. 
      &lt;/p&gt;
      
    &lt;/figcaption&gt;
    
&lt;/figure&gt;


&lt;p&gt;Finally, we wrap up this section by looking at how the independent vote has
changed over the years in Figure 3. Although votes for independent candidates
rose in 2016, it was comparable to 2000 and is totally dwarfed by 1996. Further,
while votes for independent candidates increased in every county in 2016, this
shift is insignificant in scale when compared with the shift in normalized
marginal votes (seen in Figure 2). Taken together, these two facts suggest that
the number of votes garnered by independent candidates this year was normal and
consistent with previous elections.&lt;/p&gt;

&lt;h3 id=&#34;historical-registration-data&#34;&gt;Historical Registration Data&lt;/h3&gt;

&lt;p&gt;Looking at results is one thing, but as we saw
in
&lt;a href=&#34;https://owenderby.com/blog/election_2016_pa_p1/#republicans-had-increased-representation&#34; target=&#34;_blank&#34;&gt;Part 1&lt;/a&gt;,
looking at registration data can also be insightful. To start, let&amp;rsquo;s look at how
the basic registration variables have changed over the years&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:6&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:6&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;

&lt;figure  style=&#34;width:100%&#34; &gt;
    &lt;a href=&#34;https://owenderby.com/img/election_16/pa/variables_dists_years.png&#34; target=&#34;_blank&#34;&gt;
      &lt;img src=&#34;https://owenderby.com/img/election_16/pa/variables_dists_years.png&#34; width=&#34;100%&#34;/&gt;
    &lt;/a&gt;
    
    &lt;figcaption&gt;
      
      &lt;p&gt;
        &lt;p&gt;Fig 4. Distributions by year of (from left to right): total registered voters,
relative registered Republicans, and turnout. The second row shows how each
variable changed between elections. Registered voters is normalized by the
county population estimates for each year.&lt;/p&gt;

      &lt;/p&gt;
      
    &lt;/figcaption&gt;
    
&lt;/figure&gt;


&lt;p&gt;From Figure 4, note that the total number of registered voters has
remained somewhat stable in Pennsylvania since 2000. It rose by less than 10% in
most counties since 2000, and actually declined in many 2012.&lt;/p&gt;

&lt;p&gt;Unsurprisingly, 2016 saw the highest turnout of the past 5 elections. However,
I&amp;rsquo;m surprised to see that turnout dropped in 2008 - it seemed with how many
extra MV Obama won, it would have been due at least in part to higher
turnout. Further indication of how anomalous 2008 really was.&lt;/p&gt;

&lt;p&gt;Finally, if we compare Figure 4 with Figure 2, it seems that the change in
relative Republican registrations has varied similarly to the change in
normalized marginal votes for each election. But the shifts in relative
Republican registrations are much less pronounced. Let&amp;rsquo;s see just how the two
variables correlate.&lt;/p&gt;

&lt;figure  style=&#34;width:100%&#34; &gt;
    &lt;a href=&#34;https://owenderby.com/img/election_16/pa/dvd_vs_drd_years.png&#34; target=&#34;_blank&#34;&gt;
      &lt;img src=&#34;https://owenderby.com/img/election_16/pa/dvd_vs_drd_years.png&#34; width=&#34;100%&#34;/&gt;
    &lt;/a&gt;
    
    &lt;figcaption&gt;
      
      &lt;p&gt;
        &lt;p&gt;Fig 5. Plots change
in relative Republican registrations against change in normalized marginal votes
for each county in each election. Points are colored according to the party of
the winning in that county in that election (red=Republicans,
blue=Democrats).&lt;/p&gt;

      &lt;/p&gt;
      
    &lt;/figcaption&gt;
    
&lt;/figure&gt;


&lt;p&gt;As Figure 5 indicates, the variables are indeed positively correlated, matching
our intuition above. I find it interesting how the 2008 and 2016 distributions
are distributed over a wider range, while 2004 and 2012 are much more condensed
around the origin. It&amp;rsquo;s also remarkable how few counties exhibit opposing shifts
(shift positive in registrations but negative in votes, or vice versa). While this
is typical of correlated variables, I&amp;rsquo;m still surprised by how few counties fall
in the second or fourth quadrants of the plots.&lt;/p&gt;

&lt;p&gt;Also, as we noted above, the shift in votes is generally of a higher magnitude
than the shift in registrations. I guess both are somewhat intuitive, but
together they suggest that we might be able to assemble a primitive estimator
for election results by looking at how registrations shifted since the previous
election. But I leave that for future exploration.&lt;/p&gt;

&lt;figure  style=&#34;width:100%&#34; &gt;
    &lt;a href=&#34;https://owenderby.com/img/election_16/pa/registration_changes_years.png&#34; target=&#34;_blank&#34;&gt;
      &lt;img src=&#34;https://owenderby.com/img/election_16/pa/registration_changes_years.png&#34; width=&#34;100%&#34;/&gt;
    &lt;/a&gt;
    
    &lt;figcaption&gt;
      
      &lt;p&gt;
        &lt;p&gt;Fig 6. Visualizing how the changes in registered voters and relative Republican
registrations between elections are distributed geographically (top) and along
the two axes (bottom).&lt;/p&gt;

      &lt;/p&gt;
      
    &lt;/figcaption&gt;
    
&lt;/figure&gt;


&lt;p&gt;Finally, I wanted to explore how changes in total registrations and relative
Republican registrations jointly varied, because I was curious if there was any
relation between the two (perhaps as a result of voter suppression/purging,
etc.) In Figure 6, each point plotted in the bottom row corresponds to a county
from the map above, and every county is colored according to the discretized 2D
colormap on the right. The legend in the bottom right gives a general way of
interpreting the plots based on which quadrant each county is in. For example,
counties in the upper left quadrant experienced a net loss of registrations but
a shift towards a larger percentage of voters registered Republican, meaning
that there must have been a net loss of registered Democrats.&lt;/p&gt;

&lt;p&gt;One thing that&amp;rsquo;s apparent from the figure is that the shifts are not strongly
correlated across the state. However, it is interesting that the southwestern
counties are the only ones to consistently see increases in relative percentage
of Republicans registered, while the southeastern counties have only gotten more
Democrat-leaning in registrations.&lt;/p&gt;

&lt;h3 id=&#34;summary-of-all-data-by-county&#34;&gt;Summary of all Data, by County&lt;/h3&gt;

&lt;!-- Pulling it all Together !--&gt;

&lt;figure  style=&#34;width:100%&#34; &gt;
    &lt;a href=&#34;https://owenderby.com/img/election_16/pa/largest_cities_counties_years.png&#34; target=&#34;_blank&#34;&gt;
      &lt;img src=&#34;https://owenderby.com/img/election_16/pa/largest_cities_counties_years.png&#34; width=&#34;100%&#34;/&gt;
    &lt;/a&gt;
    
    &lt;figcaption&gt;
      
      &lt;p&gt;
        &lt;p&gt;Fig 7. Visualizing a subset of the examined variables for the counties home to
the 5 largest cities in Pennsylvania.&lt;/p&gt;

      &lt;/p&gt;
      
    &lt;/figcaption&gt;
    
&lt;/figure&gt;


&lt;p&gt;Figure 7 presents the statistics for the counties where the 5 largest cities in
Pennsylvania (Philadelphia, Pittsburgh, Allentown, Erie, and Reading)
reside. Nothing in particular jumps out at me, I just find it an interesting
visualization. It doesn&amp;rsquo;t fit nicely on a single page, but I&amp;rsquo;ve also generated
the same plots for every county &lt;a href=&#34;https://owenderby.com/img/election_16/pa/counties_years.png&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;A very obvious curiosity is if one can train a classifier on this data to
see if we can cluster the counties. I made some feeble attempts but didn’t find
any meaningful clusters.&lt;/p&gt;

&lt;h2 id=&#34;closing-thoughts&#34;&gt;Closing Thoughts&lt;/h2&gt;

&lt;p&gt;In the wake of the 2016 election we heard, in the media and on social media,
many exceptional stories about how all the polls were wrong and how surprising
the result was to many people. From that, many of us, myself included,
extrapolated that this election was anomalous - that something crazy happened
that&amp;rsquo;s never happened before. And while that may have been true about the state
of the political climate in the US or the rhetoric of the campaigns, the data
doesn&amp;rsquo;t support that conclusion. If anything, 2008 was the anomaly in recent
elections. As Part 1 concluded, Trump did many things to win, but that win was
just a hastening of an existing trend towards voting for Republican candidates
in Pennsylvania.&lt;/p&gt;

&lt;p&gt;Producing this second post was challenging because going back in time provided a
whole variety of exciting ways to analyze the data. Every time I&amp;rsquo;d sit down to
answer one question, I&amp;rsquo;d wind up with 5 more questions to investigate
next. Choosing which parts of my analysis to pull out and clean up for this post
was a challenge, to say the least. As a result, the post is a bit more like a
collection of interesting figures than a cohesive narrative building to a
singular conclusion. Nevertheless, I hope you enjoyed it.&lt;/p&gt;

&lt;p&gt;As I mentioned at the end of Part 1, all data and code for generating the
results and figures in this series, plus a lot of code and figures which didn&amp;rsquo;t
make it into the posts, is available
on &lt;a href=&#34;https://github.com/oderby/elections_2016&#34; target=&#34;_blank&#34;&gt;Github&lt;/a&gt;. Someday, I&amp;rsquo;d like to come
back and continue this exploration, but if you&amp;rsquo;re excited about it, please jump
in and let me know what you find!&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Edit: After I wrote most of this post, I
discovered &lt;a href=&#34;http://datafordemocracy.org/&#34; target=&#34;_blank&#34;&gt;Data for Democracy&lt;/a&gt;
had
&lt;a href=&#34;https://medium.com/data-for-democracy/election-transparency-part-1-introducing-the-data-8258a1132315&#34; target=&#34;_blank&#34;&gt;released county-level election and registration data&lt;/a&gt; from
the 2016 election for most states. And they are supposedly working on gathering
historical data as well. So it may be a lot easier to run this analysis on other
states in the future!&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;Thanks&lt;/em&gt;&lt;/strong&gt; &lt;em&gt;to Karen Hao, Ryan Ko, Andrew Zukoski, Shane Leese and Lakshman
Sankar for reading drafts of this.&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:5&#34;&gt;&lt;p&gt;Why 1996? Somewhat arbitrary, although it gives us context from the last
two party shifts in the presidency (Bush in &amp;lsquo;00 and Obama in &amp;lsquo;08). Also, the
Pennsylvania state website only hosts results since 2000, so I had to get
creative in my google searches. Finally, I hope one day to run this analysis
for other states, and the farther I go back, the more data I&amp;rsquo;d need to
format and parse to analyze other states (where I can even get it at
all). Call me lazy.&lt;/p&gt;
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:5&#34;&gt;↩&lt;/a&gt;&lt;/li&gt;

&lt;li id=&#34;fn:6&#34;&gt;&lt;p&gt;As mentioned before, 1996 is missing when we consider registration data
because I couldn&amp;rsquo;t find it at the county level.&lt;/p&gt;
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:6&#34;&gt;↩&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>An examination of 2016 Election Results in Pennsylvania</title>
      <link>https://owenderby.com/blog/election_2016_pa_p1/</link>
      <pubDate>Thu, 06 Apr 2017 13:33:37 -0800</pubDate>
      
      <guid>https://owenderby.com/blog/election_2016_pa_p1/</guid>
      <description>

&lt;p&gt;Like many, I find myself still pondering this election. While I&amp;rsquo;ve accepted that
I&amp;rsquo;ll never fully know &lt;em&gt;why&lt;/em&gt; Trump won, I&amp;rsquo;ve remained interested in &lt;em&gt;how&lt;/em&gt; he
won. As an engineer, I decided to tackle this question the only way I know how -
by looking at the data. I chose to examine the election results and registration
statistics from Pennsylvania as a small, tractable case study, that&amp;rsquo;s still
interesting as a swing state and might be representative of larger trends.&lt;/p&gt;

&lt;p&gt;The data bares two insights. First, this election is remarkable, not because
Trump won, but because of how he won. In fact, Trump and his team had to do a
lot of things well to pull out a win in Pennsylvania. Trump outperformed Mitt
Romney (the Republican presidential candidate in 2012) by a wider margin than
Obama did over his predecessor (Kerry) in 2008. That is, &lt;strong&gt;Trump swung more
votes in 2016 than Obama did in 2008&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Second, that a Republican won Pennsylvania this year is only remarkable when
compared to Obama&amp;rsquo;s win in 2008. We often look at the 2008 election as the
obvious comparison for this election, forgetting what a remarkable election that
was itself. It turns out that when we look at the surrounding presidential
elections, we see that &lt;strong&gt;2016 was NOT an anomaly, but 2008 was&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;I have broken my analysis and results into two parts. The first part (the
remainder of this post) focuses on the 2016 results and how Trump won, while
the &lt;a href=&#34;https://owenderby.com/blog/election_2016_pa_p2/&#34; target=&#34;_blank&#34;&gt;second part&lt;/a&gt; examines previous
elections, highlighting different trends that help put this election into
context.&lt;/p&gt;

&lt;h2 id=&#34;part-one-how-trump-won&#34;&gt;Part One: How Trump Won&lt;/h2&gt;

&lt;p&gt;I was surprised to see just how much he improved over Romney to pull out this
win. Nevertheless, this was a close race. Trump won the popular vote by a mere
44,292 votes (less than 1% of all votes cast). In contrast, Obama won
Pennsylvania in 2012 by 312,501 votes (5.45%) and by 620,319 votes (10.33%)
in 2008. And yet, if you look at the map of election results by county presented
in Figure 1, you would be forgiven for wondering how the election was so close,
given how many counties are red (Trump won 56 counties to Clinton&amp;rsquo;s 11).&lt;/p&gt;

&lt;figure  style=&#34;width:75%&#34; &gt;
    &lt;a href=&#34;https://owenderby.com/img/election_16/pa/results_map_pa_16.png&#34; target=&#34;_blank&#34;&gt;
      &lt;img src=&#34;https://owenderby.com/img/election_16/pa/results_map_pa_16.png&#34; width=&#34;100%&#34;/&gt;
    &lt;/a&gt;
    
    &lt;figcaption&gt;
      
      &lt;p&gt;
        &lt;p&gt;Fig 1. Map of 2016
election results by county. Counties are colored according to their normalized
marginal votes. Cross-hatches indicate counties which Obama won in &amp;lsquo;12 that
&amp;lsquo;flipped&amp;rsquo; to Trump in &amp;lsquo;16. Dot-hatches indicate the reverse
(Romney -&amp;gt; Clinton).&lt;/p&gt;

      &lt;/p&gt;
      
    &lt;/figcaption&gt;
    
&lt;/figure&gt;


&lt;p&gt;The problem with this map is that it obscures the effect of the absolute
magnitude of the results across counties. Because Pennsylvania (like most
states) decides its electoral college by popular vote across the entire state,
it&amp;rsquo;s the total number of votes each candidate receives that matters, not how
many counties they win. Many of the counties which Trump won have dramatically
smaller populations, and thus contribute less towards the popular vote. Indeed,
in 2016, Philadelphia county cast 707,631 votes, which comprised more votes cast
than the 35 smallest counties combined (more than half of Pennsylvania&amp;rsquo;s 67
counties!).&lt;/p&gt;

&lt;p&gt;Figure 2 attempts to better illustrate the impact different counties have on
each candidate&amp;rsquo;s overall outcome, by stacking the marginal votes for each
candidate side-by-side.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Nomenclature:&lt;/strong&gt; Throughout this post, I will refer to the &lt;strong&gt;&lt;em&gt;marginal
votes&lt;/em&gt;&lt;/strong&gt; of a county. This is simply the difference between votes cast for the
Republican and the Democrat candidates. By convention, this value is positive
when the Republican gained more votes. Oftentimes, as in Figure 1, it is
useful to normalize the marginal votes for each county, dividing by the total
number of votes cast in that county in that election; I will refer to this as
&lt;strong&gt;&lt;em&gt;normalized marginal votes&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;figure  style=&#34;width:100%&#34; &gt;
    &lt;a href=&#34;https://owenderby.com/img/election_16/pa/results_marginal_votes_barh_pa_12-16.png&#34; target=&#34;_blank&#34;&gt;
      &lt;img src=&#34;https://owenderby.com/img/election_16/pa/results_marginal_votes_barh_pa_12-16.png&#34; width=&#34;100%&#34;/&gt;
    &lt;/a&gt;
    
    &lt;figcaption&gt;
      
      &lt;p&gt;
        &lt;p&gt;Fig 2. Stacked bar chart of county marginal votes in 2012 (top) and 2016
(bottom), grouped by winning candidate in that county. Each bar-section is a
county, with width equal to the marginal votes and colored according to
normalized marginal votes (same as in Fig 1). Sections within each stack are
ordered by normalized marginal votes.&lt;/p&gt;

      &lt;/p&gt;
      
    &lt;/figcaption&gt;
    
&lt;/figure&gt;


&lt;p&gt;Now that we&amp;rsquo;re reflecting the absolute impact of each county, the race appears
much closer. Note how clearly this figure illustrates the outsized
influence Philadelphia county has, which appears as the largest blue
bar. Also note how Clinton won the lion&amp;rsquo;s share of her marginal votes from just
4 counties, while Trump&amp;rsquo;s marginal votes were more evenly distributed across the
majority of the counties he won.&lt;/p&gt;

&lt;p&gt;Most importantly, notice how the two elections compare. While Clinton garnered
nearly as many marginal votes as Obama did in &amp;lsquo;12 (she was short by 3,728
votes), Trump earned 73.5% more than Romney (Trump gained 353,065 additional
votes), and 40,564 more than Obama did in &amp;lsquo;12. And Trump won these additional
votes from nearly the same counties as Romney (only a net of 2 counties flipped
Republican from &amp;lsquo;12 to &amp;lsquo;16, as Figure 1 showed). To put that in perspective, in
2008 Obama earned only 45.2% more marginal votes than Kerry did in &amp;lsquo;04 (291,836
additional marginal votes) and flipped a net of 6 counties.&lt;/p&gt;

&lt;!---
To put that in perspective, Figure 3 presents the same chart, but for
2004-2008. Here, we see Obama in &#39;08 earned only 45.2% more marginal votes than
Kerry (291,836 additional marginal votes).

&lt;figure  style=&#34;width:100%&#34; &gt;
    &lt;a href=&#34;https://owenderby.com/img/election_16/pa/results_marginal_votes_barh_pa_04-08.png&#34; target=&#34;_blank&#34;&gt;
      &lt;img src=&#34;https://owenderby.com/img/election_16/pa/results_marginal_votes_barh_pa_04-08.png&#34; width=&#34;100%&#34;/&gt;
    &lt;/a&gt;
    
    &lt;figcaption&gt;
      
      &lt;p&gt;
        &lt;p&gt;Fig 2. Stacked bar chart of county marginal votes in 2012 (top) and 2016
(bottom), grouped by winning candidate in that county. Each bar-section is a
county, with width equal to the marginal votes and colored according to
normalized marginal votes (same as in Fig 1). Sections within each stack are
ordered by normalized marginal votes.&lt;/p&gt;

      &lt;/p&gt;
      
    &lt;/figcaption&gt;
    
&lt;/figure&gt;

!---&gt;

&lt;p&gt;In this respect, Trump was able to swing more votes (when compared to his
predecessor) than Obama did in 2008. This is a remarkable fact. I wanted to know
where these votes came from - how did Trump achieve this feat? To better
understand this, I examined various theories. These are presented next. For each
theory, I discuss what I found in the data to support or refute it, and
postulate how many of Trump&amp;rsquo;s additional 353,065 marginal votes it could
explain. All comparisons are with 2012 results.&lt;/p&gt;

&lt;h2 id=&#34;republicans-had-increased-representation&#34;&gt;Republicans had Increased Representation&lt;/h2&gt;

&lt;p&gt;Probably the most credible theory is that Republican voters had a larger
presence in this election. This would be achieved through two different
mechanisms. They could have turned out to vote in higher numbers
(relative to Democrats) than in previous years. We would also see a higher
Republican representation in the results if the relative number of registered
Republican voters increased since 2012.&lt;/p&gt;

&lt;p&gt;We can&amp;rsquo;t directly determine turnout rates by party without looking at exit poll
data, which I don&amp;rsquo;t have access to. However, we can compute overall turnout for
each county (as total votes cast over total registered voters&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:1&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;) for each
election year. Figure 3 shows how overall turnout changed from 2012
to 2016. From this, we can see that in counties where Trump won the turnout was
on average (the red line in the boxplots) about 3% higher than those where
Clinton won. In all, there was a net increase of 381,380 votes cast across the
state in 2016.&lt;/p&gt;

&lt;figure  style=&#34;width:100%&#34; &gt;
    &lt;a href=&#34;https://owenderby.com/img/election_16/pa/dturnout_16.png&#34; target=&#34;_blank&#34;&gt;
      &lt;img src=&#34;https://owenderby.com/img/election_16/pa/dturnout_16.png&#34; width=&#34;100%&#34;/&gt;
    &lt;/a&gt;
    
    &lt;figcaption&gt;
      
      &lt;p&gt;
        &lt;p&gt;Fig 3. Map (left)
and &lt;a href=&#34;https://en.wikipedia.org/wiki/Box_plot&#34; target=&#34;_blank&#34;&gt;Tukey boxplots&lt;/a&gt; (right) of the
distribution of the difference in turnout (2016-2012) in each county. The hatched
counties on the map are the counties which Clinton won in 2016. For the
boxplots, the counties are grouped by the winning candidate, so each county is
only included in one boxplot or the other (not both).&lt;/p&gt;

      &lt;/p&gt;
      
    &lt;/figcaption&gt;
    
&lt;/figure&gt;


&lt;p&gt;Now, we want to know how many additional marginal votes these extra voters
contributed to Trump. For simplicity, we&amp;rsquo;ll assume that all votes are cast
according to the observed distributions for each county, as reported in Figure
1&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:2&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:2&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;. In other words, we assume that these extra voters voted similarly to the
rest of their peers in their county. Using this assumption, we conclude that
Trump gained about 65,000 marginal votes from these extra voters.&lt;/p&gt;

&lt;p&gt;Another way to increase representation of Republican voters in the result is to
increase the number of registered Republican voters &lt;em&gt;relative&lt;/em&gt; to the number of
registered Democrat voters. Interestingly, this can happen through three
distinct mechanisms - new voters can register as Republican, registered
Democrats could have switched parties, or registered Democrats are
un-registered. For now, we&amp;rsquo;ll only look at the overall changes to
registrations -
in
&lt;a href=&#34;https://owenderby.com/blog/election_2016_pa_p2/#historical-registration-data&#34; target=&#34;_blank&#34;&gt;Part 2&lt;/a&gt;,
we&amp;rsquo;ll dig deeper into these details.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Nomenclature:&lt;/strong&gt; The &lt;strong&gt;&lt;em&gt;relative Republican registrations&lt;/em&gt;&lt;/strong&gt; is a normalized
measure of how the registration statistics breaks down between Republicans and
Democrats for a given election year. This is computed as the difference
between number of registered Republicans and registered Democrats, divided the
total number of registered voters. Like marginal votes, this value is positive
when there are more Republicans registered than Democrats.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Figure 4 examines how the relative Republican registrations changed between 2016
and 2012. Note that, because Figure 4 is concerned with the delta in relative
registrations between elections, a positive value only means that there was a
net increase in the number of Republicans registered in 2016; there may still be
more registered Democrats than Republicans in a given county as a result of a
positive difference.&lt;/p&gt;

&lt;figure  style=&#34;width:100%&#34; &gt;
    &lt;a href=&#34;https://owenderby.com/img/election_16/pa/dRD_16.png&#34; target=&#34;_blank&#34;&gt;
      &lt;img src=&#34;https://owenderby.com/img/election_16/pa/dRD_16.png&#34; width=&#34;100%&#34;/&gt;
    &lt;/a&gt;
    
    &lt;figcaption&gt;
      
      &lt;p&gt;
        &lt;p&gt;Fig 4. Map (left)
and &lt;a href=&#34;https://en.wikipedia.org/wiki/Box_plot&#34; target=&#34;_blank&#34;&gt;Tukey boxplots&lt;/a&gt; (right) of the
distribution of the change in relative Republican registrations in each
county between 2016 and 2012. On the map, the counties with hatches are the
counties which Clinton won in 2016. For the boxplots, the counties are grouped
by the winning candidate, so each county is only included in one boxplot or the
other (not both).&lt;/p&gt;

      &lt;/p&gt;
      
    &lt;/figcaption&gt;
    
&lt;/figure&gt;


&lt;p&gt;As Figure 4 shows, counties Trump won saw an average 6% increase in relative
Republican registrations over counties Clinton won. If we make the same
assumption as before, these additional registered voters would have contributed
approximately 160,000 extra marginal votes for Trump.&lt;/p&gt;

&lt;p&gt;Taken together, increased Republican turnout and registrations across the state
seem to account for approximately 64% of of Trump&amp;rsquo;s extra marginal votes. Of
course, that assumes the two phenomena are independent. In reality increased
turnout is likely related to increased net Republican registrations, and so
their combined total is likely reduced (due to double-counting). Even so, it&amp;rsquo;s
clear that increased Republican representation only explains a portion of
Trump&amp;rsquo;s victory. Some other factors must have been at play in this election.&lt;/p&gt;

&lt;h2 id=&#34;independent-candidates-and-disillusioned-democrats&#34;&gt;Independent Candidates and Disillusioned Democrats&lt;/h2&gt;

&lt;p&gt;The other common theory I&amp;rsquo;ve heard is that many Democrats were disillusioned
with Clinton (including so-called &amp;ldquo;Bernie Bros&amp;rdquo;). The theory holds that these
voters opted to vote for an independent candidate instead of along party lines,
or simply didn&amp;rsquo;t turn out to vote at all, allowing Trump to win a historically
&amp;lsquo;blue&amp;rsquo; state. There are three separate phenomena to consider here.&lt;/p&gt;

&lt;p&gt;First, we might consider the possibility of a lower turnout by
Democrats. However, Figure 3 shows that voter turnout increased in nearly all
counties. So it&amp;rsquo;s unlikely that more Democrats stayed home than in previous
years.&lt;/p&gt;

&lt;p&gt;Second, we consider the &amp;ldquo;flipped&amp;rdquo; counties as potential places where
disillusioned Democrats had a direct impact. From Figure 1, we see that only 3
counties flipped Democrat -&amp;gt; Republican&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:3&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:3&#34;&gt;3&lt;/a&gt;&lt;/sup&gt;. Let&amp;rsquo;s attribute those losses
entirely to Democrats not voting for Clinton. Combined, these 3 counties might
explain about 65,000 of the additional marginal votes Trump gained over Romney.&lt;/p&gt;

&lt;p&gt;Finally, we can see if many Democrat voters opted to vote for independent
candidates rather than Clinton in this election. If so, we should see an
increase in votes cast for independent candidates in counties where Clinton
received fewer votes than Obama did. This would manifest as a negative
correlation in Figure 4. Note that here we are looking at changes in the
percentage of votes for a particular party, not marginal votes. So a negative
value here simply means a decrease in votes received when compared with 2012, but
doesn&amp;rsquo;t imply anything about where those votes went.&lt;/p&gt;

&lt;figure  style=&#34;width:100%&#34; &gt;
    &lt;a href=&#34;https://owenderby.com/img/election_16/pa/dIV_by_dDems_16.png&#34; target=&#34;_blank&#34;&gt;
      &lt;img src=&#34;https://owenderby.com/img/election_16/pa/dIV_by_dDems_16.png&#34; width=&#34;100%&#34;/&gt;
    &lt;/a&gt;
    
    &lt;figcaption&gt;
      
      &lt;p&gt;
        &lt;p&gt;Fig 4. Plot of change
from 2012 to 2016 in votes cast for: (x-axis) the Democrat candidate vs (y-axis)
all independent candidates. Values are reported as a percentage of all votes
cast in each county. The color of each marker indicates which party won that
county in 2016.&lt;/p&gt;

      &lt;/p&gt;
      
    &lt;/figcaption&gt;
    
&lt;/figure&gt;


&lt;p&gt;However, Figure 4 doesn&amp;rsquo;t confirm this theory. It appears that votes for
independent candidates rose around 2% in 2016 across all counties. Further, we
see a slightly positive correlation. So, it appears that the opposite of what
this theory predicts is observed - it is in counties where Clinton did better
than Obama that we see the largest increases in the percentage of votes cast for
independent candidates.&lt;/p&gt;

&lt;p&gt;That said, let&amp;rsquo;s suppose that these additional votes for independent candidates
did come exclusively from disillusioned democrats who otherwise would have voted
for Clinton. Combined, that comprises approximately 140,000 additional marginal
votes for Trump.&lt;/p&gt;

&lt;p&gt;Although a popular refrain amongst Clinton-supporters in the aftermath of the
election, it appears that disenfranchised Democrats didn&amp;rsquo;t help Trump as much as
you might be led to believe. Taken together, their (in)actions contributed up to
48% of Trump&amp;rsquo;s extra marginal votes, and that is an upper bound.&lt;/p&gt;

&lt;h2 id=&#34;registered-democrats-voted-for-trump&#34;&gt;Registered Democrats voted for Trump&lt;/h2&gt;

&lt;p&gt;There&amp;rsquo;s one last explanation for what happened - that registered Democrats
decided to vote for Trump. We can&amp;rsquo;t measure this directly from the data we have;
we would need exit poll data. However, when we compare the count of votes for
Trump against the number of registered Republican voters, we find that in 14 of
the counties Trump won (remember, he won 56 counties) there were more votes cast
for Trump than registered Republicans! And that is assuming that every
registered Republican in those counties voted. Even so, that adds up to at least
56,000 votes for Trump that couldn&amp;rsquo;t have come from any registered Republicans,
representing at least 15% of the extra marginal votes he gained over
Romney. And, given that it is unlikely turnout was 100% for republican voters,
the total number of Democrats voting for Trump was likely much higher.&lt;/p&gt;

&lt;h2 id=&#34;it-s-complicated&#34;&gt;It&amp;rsquo;s Complicated&lt;/h2&gt;

&lt;p&gt;Trump&amp;rsquo;s win in Pennsylvania came as a surprise to me and many of my peers. The
knee-jerk reaction from my liberal media bubble was that Clinton didn&amp;rsquo;t do
enough and Trump got lucky. However, the truth is that Trump won 40,564 more
marginal votes than Obama did in 2012 and swung more marginal votes (when
compared to Romney) than Obama did in 2008 (when compared to Kerry).&lt;/p&gt;

&lt;p&gt;Further, while we often talk about how Clinton lost the election, we tend to
oversimplify the reasons. In reality, it&amp;rsquo;s far more complex than any single
factor can explain. As I&amp;rsquo;ve shown, there&amp;rsquo;s evidence that more Republicans
registered and voted than in 2012, the few counties he flipped helped him win,
independent candidates likely didn&amp;rsquo;t affect the outcome, and many registered
democrats voted for Trump. Although I tried to quantify to what extent each of
these factors contributed to Trump&amp;rsquo;s victory, the more important point is that
none of these alone account for Trump&amp;rsquo;s win. It was the result of a combination
of these factors, likely achieved through coordinated actions by Trump&amp;rsquo;s team.&lt;/p&gt;

&lt;p&gt;So far, I&amp;rsquo;ve only presented various theories explaining &lt;em&gt;how&lt;/em&gt; Trump won. While
discussing &lt;em&gt;why&lt;/em&gt; he won would be equally as interesting, it&amp;rsquo;s also far more
subjective and qualitative, and draws on expertise in areas of demographics and
political theory that I utterly lack. So I&amp;rsquo;ll leave that discussion to others.&lt;/p&gt;

&lt;p&gt;If you&amp;rsquo;ve enjoyed this post, be sure to check
out &lt;a href=&#34;https://owenderby.com/blog/election_2016_pa_p2/&#34; target=&#34;_blank&#34;&gt;Part 2&lt;/a&gt;, where I dive into the
data from the previous presidential elections in Pennsylvania and try to put
this election in a historical context. And, if you find an issue or want to let
me know what you think of this writeup, please feel free to leave a comment
below or &lt;a href=&#34;mailto:me@owenderby.com&#34; target=&#34;_blank&#34;&gt;contact me&lt;/a&gt; directly.&lt;/p&gt;

&lt;p&gt;Finally, as mentioned before, all data, results and discussions pertain
exclusively to presidential elections in Pennsylvania state. Someday, I&amp;rsquo;d like
to extend this analysis to other states, but that&amp;rsquo;s limited by time and the
availability of county-level data. If anyone wants to explore the data further
themselves, I&amp;rsquo;ve made the notebook and data used available
on &lt;a href=&#34;https://github.com/oderby/elections_2016&#34; target=&#34;_blank&#34;&gt;Github&lt;/a&gt;. I collected the data by
manually scraping and formatting government and public repositories; source
links and methodology can also be found on Github.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;Thanks&lt;/em&gt;&lt;/strong&gt; &lt;em&gt;to Karen Hao, Ryan Ko, Andrew Zukoski, Shane Leese and Lakshman
Sankar for reading drafts of this.&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:1&#34;&gt;&lt;p&gt;A more rigorous approach for computing voter turnout is to use voting age
population (VAP) or voting eligible population (VEP) as the denominator. VAP
is readily available from the US Census, and so is a popular choice, but has
many flaws, especially when comparing across states as different states
place different restrictions on who is actually eligible to vote within the
VAP. VEP is a fairly recent idea, and is meant to account for all the
differences in states and thus be more readily comparable between
them. However, it relies on data that is not always easy to find (or even
public at all) at the county level, and is thus nearly impossible for me to
use in this analysis. Michael McDonald has good set of posts
on &lt;a href=&#34;http://www.electproject.org/home/voter-turnout/faq/vap&#34; target=&#34;_blank&#34;&gt;VAP&lt;/a&gt;
vs &lt;a href=&#34;http://www.electproject.org/home/voter-turnout/faq/sold&#34; target=&#34;_blank&#34;&gt;VEP&lt;/a&gt; and
their
&lt;a href=&#34;http://www.electproject.org/home/voter-turnout/faq/vap-v-vap&#34; target=&#34;_blank&#34;&gt;differences&lt;/a&gt;
and
why
&lt;a href=&#34;http://www.electproject.org/home/voter-turnout/faq/reg&#34; target=&#34;_blank&#34;&gt;using registration is not ideal&lt;/a&gt;. In
all honesty, the biggest flaw with using RV instead of VAP in this analysis
is that I can&amp;rsquo;t separate changes in registration due to population
growth/change vs political views shifting.&lt;/p&gt;
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:1&#34;&gt;↩&lt;/a&gt;&lt;/li&gt;

&lt;li id=&#34;fn:2&#34;&gt;&lt;p&gt;We need to make some assumption here, because it&amp;rsquo;s impossible to know the
truth, as that would involve asking every single person that voted, if they
voted previously and how they voted this year. Assuming all voters voted
according to the same distribution is a simplifying, yet reasonable,
assumption here.&lt;/p&gt;
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:2&#34;&gt;↩&lt;/a&gt;&lt;/li&gt;

&lt;li id=&#34;fn:3&#34;&gt;&lt;p&gt;And 1 county flipped Republican -&amp;gt; Democrat, counteracting the other 3
somewhat, but we&amp;rsquo;ll ignore that here.&lt;/p&gt;
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:3&#34;&gt;↩&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Hosting my Personal Website (for Free!)</title>
      <link>https://owenderby.com/blog/website-setup/</link>
      <pubDate>Sat, 25 Feb 2017 00:44:37 -0800</pubDate>
      
      <guid>https://owenderby.com/blog/website-setup/</guid>
      <description>

&lt;p&gt;This website came about because I wanted to update my personal website and I had
some time on my hands. After reflection, I decided to build a static site and
host it with GitHub Pages. In retrospect, the process was mostly
straightforward, but there were a few points that weren&amp;rsquo;t obvious to me at the
time. This post details how I built the site, what I tools I ended up using, and
how the site is hosted, for free! Maybe you&amp;rsquo;ll find it helpful!&lt;/p&gt;

&lt;h1 id=&#34;building-a-static-site&#34;&gt;Building a Static Site&lt;/h1&gt;

&lt;p&gt;The first decision I made was that I would use
a &lt;a href=&#34;https://en.wikipedia.org/wiki/Static_web_page&#34; target=&#34;_blank&#34;&gt;static site&lt;/a&gt;. I only wanted to
showcase my projects, host my resume, post the occasional blog post, and display
other static content. Any experimentation or fancy interactions I wanted would
most likely be in browser-side Javascript, so a static site would serve my needs
well. Going with a static website also meant I wouldn&amp;rsquo;t need to run my own
server (if I used a third-party hosting service), reducing my potential costs
significantly. Also, because there&amp;rsquo;s no database or server interactions, it
greatly reduces the attack surface, making it much easier to secure the site.&lt;/p&gt;

&lt;p&gt;Next, I needed to decide how to build the site. A simple search for &amp;ldquo;build a
static site&amp;rdquo; yields an array of tools and even more guides to the &amp;ldquo;10 best
static site generators&amp;rdquo;. There&amp;rsquo;s also a variety of managed solutions (like
Wordpress, Wix, Squarespace, etc.). Somewhat overwhelming to decide between, to
say the least. I knew I didn&amp;rsquo;t want to do it all from scratch (I didn&amp;rsquo;t want to
style it from scratch or co-opt existing themes), and I was trying to do this as
cheaply as possible, so that ruled out paying for managed solutions. That left
using an open source tool to build it&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:1&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;. But which tool to use?&lt;/p&gt;

&lt;p&gt;I wound up going with &lt;a href=&#34;https://gohugo.io/&#34; target=&#34;_blank&#34;&gt;Hugo&lt;/a&gt;, because it was well-reviewed,
actively maintained, and written in Go. The documentation is decent (and it was
updated several times just while I was building the site) and the forum is
active, so &lt;a href=&#34;https://gohugo.io/overview/quickstart/&#34; target=&#34;_blank&#34;&gt;getting up and running&lt;/a&gt; was
relatively easy. The tool has quite a few configurations and built-in
integrations (like &lt;a href=&#34;https://gohugo.io/extras/analytics/&#34; target=&#34;_blank&#34;&gt;Google Analytics&lt;/a&gt;
and &lt;a href=&#34;https://gohugo.io/extras/comments/&#34; target=&#34;_blank&#34;&gt;Disqus integration&lt;/a&gt;), providing a lot
of functionality out of the box. There are also a bunch of
pre-built &lt;a href=&#34;http://themes.gohugo.io/&#34; target=&#34;_blank&#34;&gt;themes&lt;/a&gt; to choose from.&lt;/p&gt;

&lt;p&gt;One downside I encountered was how cumbersome it is to customize the site in
certain ways. Hugo is great if you everything you want to do fits well within
their existing configurations and exposed functionality (which, to be fair, is
quite expansive). However, if you want to customize anything outside of that,
like the layout of the blog posts page or styling content differently, it
requires diving much deeper into the internals of how Hugo organizes and builds
the site, just to figure out where the bit of logic exists that you want to
change. And then to change it, you need to figure out the local location to
place a file to contain the overriding/customized code. So there&amp;rsquo;s quite a step
function (in the learning curve) between just using the tool and customizing the
result.&lt;/p&gt;

&lt;p&gt;Ultimately, I&amp;rsquo;m glad I went with an existing solution, despite some of it&amp;rsquo;s
rough edges. I didn&amp;rsquo;t explore any other solutions, so I can&amp;rsquo;t say whether Hugo
was the best tool for me or not, but I&amp;rsquo;m happy with my choice. Although it took
more work to get the site I wanted than I anticipated, I know I got much
farther, quicker with Hugo than I would have on my own.&lt;/p&gt;

&lt;h1 id=&#34;hosting-and-serving-the-site&#34;&gt;Hosting and Serving the Site&lt;/h1&gt;

&lt;p&gt;Once I had my static site built, I needed to figure out where I&amp;rsquo;d host it. My
goals for hosting were that it be (1) as cheap as possible and (2) easy to
deploy to. Because it&amp;rsquo;s all static, I could host it on any of the existing file
storage services (e.g. &lt;a href=&#34;https://aws.amazon.com/s3/&#34; target=&#34;_blank&#34;&gt;S3&lt;/a&gt;
or &lt;a href=&#34;https://cloud.google.com/storage/&#34; target=&#34;_blank&#34;&gt;GCS&lt;/a&gt;). However, those would cost money
(likely less than $1 per month, but it&amp;rsquo;s the principle of the thing!), and I had
a hunch I could do it for free. Then I discovered you could host static websites
with &lt;a href=&#34;https://pages.github.com/&#34; target=&#34;_blank&#34;&gt;GitHub Pages&lt;/a&gt;. Free and integrated directly
into GitHub (so no extra deploy steps), Pages was clearly the way to go. The
only potential drawback was that my site and code would need to be public. Since
I was using open source tools and all my content was going to be public anyways,
this wasn&amp;rsquo;t a problem for me.&lt;/p&gt;

&lt;p&gt;The final piece was figuring out the domain I wanted to host the page at. GitHub
provides free subdomains on the github.io domain for all Pages, but I wanted a
custom domain to truly make the site mine. I had
used &lt;a href=&#34;https://www.name.com/&#34; target=&#34;_blank&#34;&gt;name.com&lt;/a&gt; in the past, so I just used them to
register &lt;a href=&#34;https://owenderby.com&#34; target=&#34;_blank&#34;&gt;owenderby.com&lt;/a&gt; for $8.98 (including Whois
Privacy).&lt;/p&gt;

&lt;h1 id=&#34;gluing-everything-together&#34;&gt;Gluing Everything Together&lt;/h1&gt;

&lt;p&gt;With all the major decisions made, it was time to assemble the parts and get the
site up. This was accomplished in the following steps/configurations:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Use Hugo to create the initial site: &lt;code&gt;hugo new site .&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://gohugo.io/themes/installing/#installing-a-specific-theme&#34; target=&#34;_blank&#34;&gt;Install a Hugo theme&lt;/a&gt; and
&lt;a href=&#34;https://gohugo.io/themes/usage/&#34; target=&#34;_blank&#34;&gt;set it as default&lt;/a&gt; for the site.&lt;/li&gt;
&lt;li&gt;Build the site in the docs directory (this is important for hosting with
GitHub Pages in step 5): &lt;code&gt;hugo -d docs&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Create a git repository, commit the initial site and push it up to GitHub.&lt;/li&gt;
&lt;li&gt;Setup GitHub Pages to work for a custom domain. You need to follow
a
&lt;a href=&#34;https://help.github.com/articles/using-a-custom-domain-with-github-pages/&#34; target=&#34;_blank&#34;&gt;few directions&lt;/a&gt; to
do this, including setting up DNS entries and configuring the repository.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;One final step I took was setting up TLS (HTTPS) for my site. Although not
strictly required, I generally expect all sites I use these days to be served
over TLS, so my site couldn&amp;rsquo;t be an exception. Sadly, GitHub Pages doesn&amp;rsquo;t
support HTTPS for custom
domains. Fortunately, &lt;a href=&#34;https://www.cloudflare.com/&#34; target=&#34;_blank&#34;&gt;Cloudflare&lt;/a&gt; provides a free
plan for personal websites, which includes their Full SSL solution via shared
certificates, so you can simply sign up for a free account and setup
SSL. Cloudflare has a
good
&lt;a href=&#34;https://blog.cloudflare.com/secure-and-fast-github-pages-with-cloudflare/&#34; target=&#34;_blank&#34;&gt;blog post&lt;/a&gt; covering
how to do this with GitHub Pages, so I just followed the directions there.&lt;/p&gt;

&lt;p&gt;And there you go! For the cost of registering a domain name, you have your own
personal static website up and served on your custom domain! And of course,
you could do this all for free if you were satisfied with hosting it on the
GitHub domain.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Edit (April 6 2016):&lt;/strong&gt; &lt;em&gt;I also setup gmail for owenderby.com using Mailgun,
all for free. Rather than repeat the steps here, you can follow
this
&lt;a href=&#34;https://simplyian.com/2015/01/07/Hacking-GMail-to-use-custom-domains-for-free/&#34; target=&#34;_blank&#34;&gt;guide&lt;/a&gt; to
do it yourself.&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:1&#34;&gt;&lt;p&gt;What kind of developer would I be if I didn&amp;rsquo;t build it myself? (And before
you roll your eyes, at least I didn&amp;rsquo;t build it from scratch!)&lt;/p&gt;
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:1&#34;&gt;↩&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Making Panoramas</title>
      <link>https://owenderby.com/blog/panoramas/</link>
      <pubDate>Tue, 07 Feb 2017 17:23:05 -0800</pubDate>
      
      <guid>https://owenderby.com/blog/panoramas/</guid>
      <description>

&lt;p&gt;I recently finished up a month of travel. In addition to seeing great friends
and beautiful places, I used my travels as an opportunity to learn how to use a
DSLR. I mean &lt;em&gt;really learn&lt;/em&gt;, beyond just the point-and-shoot basics we all
know. So I borrowed an old Nikon D40 from a friend and sort of just dove
in. Turns out, it&amp;rsquo;s not very difficult to go from n00b to novice, and it&amp;rsquo;s even
easier to take a lot of photos&amp;hellip;but that&amp;rsquo;s a story for another day.&lt;/p&gt;

&lt;figure  style=&#34;width:100%&#34; &gt;
    &lt;a href=&#34;https://owenderby.com/img/panos/pano_sample.jpg&#34; target=&#34;_blank&#34;&gt;
      &lt;img src=&#34;https://owenderby.com/img/panos/pano_sample.jpg&#34; width=&#34;100%&#34;/&gt;
    &lt;/a&gt;
    
    &lt;figcaption&gt;
      
      &lt;p&gt;
        &lt;p&gt;A lovely creek in Boise National
Forest.&lt;/p&gt;

      &lt;/p&gt;
      
    &lt;/figcaption&gt;
    
&lt;/figure&gt;


&lt;p&gt;One of the challenges I (unwittingly) set for myself was creating panoramas,
like the one above. It seems straightforward in theory - shoot a series of
overlapping photos and then combine them using software. Afterall, most modern
smart phones have panorama modes built into their camera apps. However, as I
soon learned, it can very easily turn into a deep, interesting &lt;del&gt;trap&lt;/del&gt; rabbit
hole of techniques and details.&lt;/p&gt;

&lt;p&gt;This post is a summary of my findings from figuring out how to create panoramas
from individual photos, and then uploading them to Facebook as &amp;ldquo;Photo
Spheres&amp;rdquo;&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:6&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:6&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;. This wasn&amp;rsquo;t as simple as I expected it to be, so I wanted to
record my insights and process, for my future self and anyone else who is silly
enough to try for themselves.&lt;/p&gt;

&lt;p&gt;One last aside - I work predominantly on Ubuntu with FOSS, so this is written
using entirely open source tools. This is definitely possible using Photoshop
(heck, it&amp;rsquo;s probably much easier), but YMMV.&lt;/p&gt;

&lt;h2 id=&#34;making-the-panorama&#34;&gt;Making the Panorama&lt;/h2&gt;

&lt;p&gt;There&amp;rsquo;s effectively two components to my process:&lt;/p&gt;

&lt;ol type=&#34;A&#34;&gt;
&lt;li&gt;Produce the raw panorama by stitching together a series of pictures.&lt;/li&gt;
&lt;li&gt;Set the panorama to have the correct field of view (FOV) and image size and
   then add appropriate metadata so it&#39;s recognized as a Photo Sphere.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This section focuses on part A.&lt;/p&gt;

&lt;h3 id=&#34;taking-the-photos&#34;&gt;Taking the Photos&lt;/h3&gt;

&lt;div class=&#39;row&#39;&gt;
    &lt;div class=&#39;col-xs-6 col-sm-3&#39;&gt;
        &lt;figure  style=&#34;width:100%&#34; &gt;
    &lt;a href=&#34;https://owenderby.com/img/panos/a.JPG&#34; target=&#34;_blank&#34;&gt;
      &lt;img src=&#34;https://owenderby.com/img/panos/a.JPG&#34; width=&#34;100%&#34;/&gt;
    &lt;/a&gt;
    
&lt;/figure&gt;

    &lt;/div&gt;
    &lt;div class=&#39;col-xs-6 col-sm-3&#39;&gt;
        &lt;figure  style=&#34;width:100%&#34; &gt;
    &lt;a href=&#34;https://owenderby.com/img/panos/b.JPG&#34; target=&#34;_blank&#34;&gt;
      &lt;img src=&#34;https://owenderby.com/img/panos/b.JPG&#34; width=&#34;100%&#34;/&gt;
    &lt;/a&gt;
    
&lt;/figure&gt;

    &lt;/div&gt;
    &lt;div class=&#39;col-xs-6 col-sm-3&#39;&gt;
        &lt;figure  style=&#34;width:100%&#34; &gt;
    &lt;a href=&#34;https://owenderby.com/img/panos/c.JPG&#34; target=&#34;_blank&#34;&gt;
      &lt;img src=&#34;https://owenderby.com/img/panos/c.JPG&#34; width=&#34;100%&#34;/&gt;
    &lt;/a&gt;
    
&lt;/figure&gt;

    &lt;/div&gt;
    &lt;div class=&#39;col-xs-6 col-sm-3&#39;&gt;
        &lt;figure  style=&#34;width:100%&#34; &gt;
    &lt;a href=&#34;https://owenderby.com/img/panos/d.JPG&#34; target=&#34;_blank&#34;&gt;
      &lt;img src=&#34;https://owenderby.com/img/panos/d.JPG&#34; width=&#34;100%&#34;/&gt;
    &lt;/a&gt;
    
&lt;/figure&gt;

    &lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#39;caption&#39;&gt;
    &lt;p&gt;&lt;/p&gt;
    &lt;p&gt;4 individuals photos.&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Since I was just starting out with a borrowed camera, I wasn&amp;rsquo;t very
sophisticated in my setup for taking the panorama shots. I shot hand-held, and
used the horizon as my reference as I swept my camera across the scene, taking
pictures periodically. Of course, there are
some &lt;a href=&#34;http://wiki.panotools.org/Heads&#34; target=&#34;_blank&#34;&gt;very fancy rigs&lt;/a&gt; out there to buy for
your tripod, and there are even some clever techniques for better hand-held
shots (google &amp;ldquo;philopod&amp;rdquo; if you&amp;rsquo;re curious).&lt;/p&gt;

&lt;p&gt;Nevertheless, I found I was able to produce decent panoramas, once I learned how
to keep the exposure and white balance the same in every picture.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;ProTip #1&lt;/em&gt;&lt;/strong&gt; – Consider using
the &lt;a href=&#34;https://photographylife.com/nikon-ae-l-af-l-button&#34; target=&#34;_blank&#34;&gt;AutoExposure-Lock&lt;/a&gt;
feature of your camera when taking a photo series for a panorama. It makes the
resulting panorama look more natural and contiguous, at the cost of some
places potentially being under- or over-exposed.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;I didn&amp;rsquo;t have many problems with parallax, since I was taking mostly wide-angle
landscape panoramas. But I now know that I can reduce parallax effects by
rotating the camera about
its &lt;a href=&#34;http://wiki.panotools.org/No-parallax_point&#34; target=&#34;_blank&#34;&gt;&amp;ldquo;no-parallax point&amp;rdquo;&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&#34;stitching-the-photos&#34;&gt;Stitching the Photos&lt;/h3&gt;

&lt;p&gt;For stitching, the best open source tool I found&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:1&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;
is &lt;a href=&#34;http://hugin.sourceforge.net/&#34; target=&#34;_blank&#34;&gt;Hugin&lt;/a&gt;. Hugin is actually a front end GUI for
the &lt;a href=&#34;http://wiki.panotools.org/Panorama_tools&#34; target=&#34;_blank&#34;&gt;Panorama Tools&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Now, Hugin is an amazing tool and can be used to do a tremendous amount of
things. And so, here is where the hole really starts. Between trying to figure
out how to use the tool and being distracted by learning what people do with the
tool, I spent way too long here. And every time I revisit this, I seem to lose
more time&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:2&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:2&#34;&gt;3&lt;/a&gt;&lt;/sup&gt;. But, even I have limits to how deep down the rabbit hole I&amp;rsquo;ll
go. So, here I&amp;rsquo;ll be focusing on the practical findings, and leaving some
questions unanswered&amp;hellip;because&amp;hellip;I just need to move on 😵&lt;/p&gt;

&lt;p&gt;So, without further adieu, here&amp;rsquo;s the CliffsNotes&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:4&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:4&#34;&gt;4&lt;/a&gt;&lt;/sup&gt; for creating panoramas in
Hugin:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Load you photo series.&lt;/li&gt;
&lt;li&gt;Switch to &amp;lsquo;Advanced&amp;rsquo; interface.&lt;/li&gt;
&lt;li&gt;On the &amp;lsquo;Photos&amp;rsquo; tab:

&lt;ol&gt;
&lt;li&gt;Select &amp;lsquo;Hugin\&amp;rsquo;s CPFind + Celeste&amp;rsquo; option for Feature Matching. Press
&amp;lsquo;Create control points&amp;rsquo; button.&lt;/li&gt;
&lt;li&gt;Select &amp;lsquo;Positions, View and Barrel&amp;rsquo; for Geometric.&lt;/li&gt;
&lt;li&gt;Run the optimizer (Edit &amp;gt; Optimize)&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;Switch back to &amp;lsquo;Simple&amp;rsquo; interface.&lt;/li&gt;
&lt;li&gt;Go to &amp;lsquo;Preview&amp;rsquo; tab and review panorama. You&amp;rsquo;re looking for a few things:

&lt;ol&gt;
&lt;li&gt;Are there any redundant photos? (e.g. photos arranged [1][2][3] such
that 1 and 3 have enough overlap that 2 isn&amp;rsquo;t needed).&lt;/li&gt;
&lt;li&gt;Are there any moving objects (cars, people) in the image? If so, consider
using a &lt;a href=&#34;http://wiki.panotools.org/Hugin_Mask_tab&#34; target=&#34;_blank&#34;&gt;mask&lt;/a&gt; to hide it.&lt;/li&gt;
&lt;li&gt;Does the panorama look good (well aligned and not distorted)? If not, you
may need to manually
add/remove
&lt;a href=&#34;http://wiki.panotools.org/Hugin_Control_Points_tab&#34; target=&#34;_blank&#34;&gt;control points&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;Go to the &amp;lsquo;Projection&amp;rsquo; tab and press the &amp;lsquo;Fit&amp;rsquo; button. You may want to try
different projections to see if any work better. For wide-angle panoramas of
nature, &amp;lsquo;cylindrical&amp;rsquo; seems best.&lt;/li&gt;
&lt;li&gt;Go to the &amp;lsquo;Move/Drag&amp;rsquo; tab and press &amp;lsquo;Straighten&amp;rsquo; button. This should make a
very subtle change to the panorama - if instead it turns your panorama into
an &amp;rsquo;S&amp;rsquo;, Hugin probably has your lens information or focal length wrong&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:5&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:5&#34;&gt;5&lt;/a&gt;&lt;/sup&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure  style=&#34;width:100%&#34; &gt;
    &lt;a href=&#34;https://owenderby.com/img/panos/int_pano_hugin.jpg&#34; target=&#34;_blank&#34;&gt;
      &lt;img src=&#34;https://owenderby.com/img/panos/int_pano_hugin.jpg&#34; width=&#34;100%&#34;/&gt;
    &lt;/a&gt;
    
    &lt;figcaption&gt;
      
      &lt;p&gt;
        Panorama so far.
      &lt;/p&gt;
      
    &lt;/figcaption&gt;
    
&lt;/figure&gt;


&lt;p&gt;Okay, so now you have a choice, depending on what sort of panorama you want to
produce. Typically, you&amp;rsquo;ll want to produce a Photo Sphere, which is a much
cooler way to show off your panorama. In that case, proceed to the
next &lt;a href=&#34;#make-sphere&#34; target=&#34;_blank&#34;&gt;section&lt;/a&gt; now.&lt;/p&gt;

&lt;p&gt;However, sometimes you just want a flat, cropped panorama. I typically opt for
this when the estimated horizontal FOV&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:8&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:8&#34;&gt;6&lt;/a&gt;&lt;/sup&gt; is ≤160° or I&amp;rsquo;m just stitching
together a couple photos (not really a panorama). To do this, we continue from
above:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Switch to &amp;lsquo;Advanced&amp;rsquo; interface.&lt;/li&gt;
&lt;li&gt;Go to &amp;lsquo;Stitcher&amp;rsquo; tab and&amp;hellip;

&lt;ol&gt;
&lt;li&gt;Press &amp;lsquo;Calculate Optimal Size&amp;rsquo;&lt;/li&gt;
&lt;li&gt;Press &amp;lsquo;Fit Crop to Images&amp;rsquo;&lt;/li&gt;
&lt;li&gt;Ensure &amp;lsquo;Exposure corrected, low dynamic range&amp;rsquo; is the only option selected.&lt;/li&gt;
&lt;li&gt;Change the format to &amp;lsquo;JPEG&amp;rsquo;&lt;/li&gt;
&lt;li&gt;Press &amp;lsquo;Stitch!&amp;rsquo; button and choose place to save hugin project file, then
name and place to save resulting panorama.&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;figure  style=&#34;width:100%&#34; &gt;
    &lt;a href=&#34;https://owenderby.com/img/panos/flat_pano.jpg&#34; target=&#34;_blank&#34;&gt;
      &lt;img src=&#34;https://owenderby.com/img/panos/flat_pano.jpg&#34; width=&#34;100%&#34;/&gt;
    &lt;/a&gt;
    
    &lt;figcaption&gt;
      
      &lt;p&gt;
        Finished flat panorama.
      &lt;/p&gt;
      
    &lt;/figcaption&gt;
    
&lt;/figure&gt;


&lt;p&gt;That&amp;rsquo;s it - you should have a nice, clear panorama to post as you like!&lt;/p&gt;

&lt;h2 id=&#34;make-sphere&#34;&gt;Making a Photo Sphere&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:12&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:12&#34;&gt;7&lt;/a&gt;&lt;/sup&gt;&lt;/h2&gt;

&lt;p&gt;Instead, you might want to post your panorama as a Photo Sphere. To do so, you
just need to massage it into a size and shape that Facebook will accept and
recognize as a 360° image&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:9&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:9&#34;&gt;8&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;

&lt;h3 id=&#34;image-shape&#34;&gt;Image Shape&lt;/h3&gt;

&lt;p&gt;First, you need to make your panorama fit into one of seven predefined sizes
(determined by horizontal and vertical FOV):&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Go back to the &amp;lsquo;Projection&amp;rsquo; tab and note the estimated horizontal and
vertical FOV values. Then find the row in the following table that best
matches those values. Enter the FOV values from the table into Hugin. The
Image Size and Command you&amp;rsquo;ll use next.&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;H FOV&lt;/th&gt;
&lt;th&gt;V FOV&lt;/th&gt;
&lt;th&gt;Image Size (px)&lt;/th&gt;
&lt;th&gt;Command&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;120°&lt;/td&gt;
&lt;td&gt;86°&lt;/td&gt;
&lt;td&gt;6000x5343&lt;/td&gt;
&lt;td&gt;&lt;input type=&#34;text&#34; class=&#34;form-control input-sm&#34; value=&#34;exiftool -overwrite_original -FullPanoWidthPixels=18000 -FullPanoHeightPixels=9000 -CroppedAreaLeftPixels=6000 -CroppedAreaTopPixels=2350 -CroppedAreaImageWidthPixels=6000 -CroppedAreaImageHeightPixels=4300 -ProjectionType=cylindrical path/to/image.jpg&#34; readonly=&#34;&#34; onclick=&#34;this.select()&#34;&gt;
&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;150°&lt;/td&gt;
&lt;td&gt;86°&lt;/td&gt;
&lt;td&gt;6000x4274&lt;/td&gt;
&lt;td&gt;&lt;input type=&#34;text&#34; class=&#34;form-control input-sm&#34; value=&#34;exiftool -overwrite_original -FullPanoWidthPixels=14400 -FullPanoHeightPixels=7200 -CroppedAreaLeftPixels=4200 -CroppedAreaTopPixels=1880 -CroppedAreaImageWidthPixels=6000 -CroppedAreaImageHeightPixels=3440 -ProjectionType=cylindrical path/to/image.jpg&#34; readonly=&#34;&#34; onclick=&#34;this.select()&#34;&gt;
&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;180°&lt;/td&gt;
&lt;td&gt;86°&lt;/td&gt;
&lt;td&gt;6000x3562&lt;/td&gt;
&lt;td&gt;&lt;input type=&#34;text&#34; class=&#34;form-control input-sm&#34; value=&#34;exiftool -overwrite_original -FullPanoWidthPixels=12000 -FullPanoHeightPixels=6000 -CroppedAreaLeftPixels=3000 -CroppedAreaTopPixels=1567 -CroppedAreaImageWidthPixels=6000 -CroppedAreaImageHeightPixels=2867 -ProjectionType=cylindrical path/to/image.jpg&#34; readonly=&#34;&#34; onclick=&#34;this.select()&#34;&gt;
&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;240°&lt;/td&gt;
&lt;td&gt;86°&lt;/td&gt;
&lt;td&gt;6000x2671&lt;/td&gt;
&lt;td&gt;&lt;input type=&#34;text&#34; class=&#34;form-control input-sm&#34; value=&#34;exiftool -overwrite_original -FullPanoWidthPixels=9000 -FullPanoHeightPixels=4500 -CroppedAreaLeftPixels=1500 -CroppedAreaTopPixels=1175 -CroppedAreaImageWidthPixels=6000 -CroppedAreaImageHeightPixels=2150 -ProjectionType=cylindrical path/to/image.jpg&#34; readonly=&#34;&#34; onclick=&#34;this.select()&#34;&gt;
&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;300°&lt;/td&gt;
&lt;td&gt;86°&lt;/td&gt;
&lt;td&gt;6000x2137&lt;/td&gt;
&lt;td&gt;&lt;input type=&#34;text&#34; class=&#34;form-control input-sm&#34; value=&#34;exiftool -overwrite_original -FullPanoWidthPixels=7200 -FullPanoHeightPixels=3600 -CroppedAreaLeftPixels=600 -CroppedAreaTopPixels=940 -CroppedAreaImageWidthPixels=6000 -CroppedAreaImageHeightPixels=1720 -ProjectionType=cylindrical path/to/image.jpg&#34; readonly=&#34;&#34; onclick=&#34;this.select()&#34;&gt;
&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;360°&lt;/td&gt;
&lt;td&gt;86°&lt;/td&gt;
&lt;td&gt;6000x1781&lt;/td&gt;
&lt;td&gt;&lt;input type=&#34;text&#34; class=&#34;form-control input-sm&#34; value=&#34;exiftool -overwrite_original -FullPanoWidthPixels=6000 -FullPanoHeightPixels=3000 -CroppedAreaLeftPixels=0 -CroppedAreaTopPixels=783 -CroppedAreaImageWidthPixels=6000 -CroppedAreaImageHeightPixels=1433 -ProjectionType=cylindrical path/to/image.jpg&#34; readonly=&#34;&#34; onclick=&#34;this.select()&#34;&gt;
&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;360°&lt;/td&gt;
&lt;td&gt;65°&lt;/td&gt;
&lt;td&gt;6000x1217&lt;/td&gt;
&lt;td&gt;&lt;input type=&#34;text&#34; class=&#34;form-control input-sm&#34; value=&#34;exiftool -overwrite_original -FullPanoWidthPixels=6000 -FullPanoHeightPixels=3000 -CroppedAreaLeftPixels=0 -CroppedAreaTopPixels=958 -CroppedAreaImageWidthPixels=6000 -CroppedAreaImageHeightPixels=1083 -ProjectionType=cylindrical path/to/image.jpg&#34; readonly=&#34;&#34; onclick=&#34;this.select()&#34;&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Go to the &amp;lsquo;Crop&amp;rsquo; tab and click on the button next to the crop dimensions to
&amp;lsquo;reset crop to maximal possible area&amp;rsquo;. The result should be your panorama
embedded in an overall image which covers the desired FOV.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Switch back to &amp;lsquo;Advanced&amp;rsquo; interface.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Go to &amp;lsquo;Stitcher&amp;rsquo; tab and&amp;hellip;&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Change the Canvas Width to be 6000. The Height value should match the Image
Size given in the above table. Leave all other values for FOV and Crop
alone.&lt;/li&gt;
&lt;li&gt;Ensure &amp;lsquo;Exposure corrected, low dynamic range&amp;rsquo; is the only option selected.&lt;/li&gt;
&lt;li&gt;Change the format to &amp;lsquo;JPEG&amp;rsquo;&lt;/li&gt;
&lt;li&gt;Press &amp;lsquo;Stitch!&amp;rsquo; button and choose place to save hugin project file, then
name and place to save resulting panorama.&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This should result in something that looks like the following:&lt;/p&gt;

&lt;figure  style=&#34;width:100%&#34; &gt;
    &lt;a href=&#34;https://owenderby.com/img/panos/flat_photosphere.jpg&#34; target=&#34;_blank&#34;&gt;
      &lt;img src=&#34;https://owenderby.com/img/panos/flat_photosphere.jpg&#34; width=&#34;100%&#34;/&gt;
    &lt;/a&gt;
    
    &lt;figcaption&gt;
      
      &lt;p&gt;
        &lt;p&gt;Photosphere (shown as
regular image, so appears flat).&lt;/p&gt;

      &lt;/p&gt;
      
    &lt;/figcaption&gt;
    
&lt;/figure&gt;


&lt;h3 id=&#34;image-metadata&#34;&gt;Image Metadata&lt;/h3&gt;

&lt;p&gt;Now, you need to set the metadata correctly on your image so that it &lt;em&gt;declares&lt;/em&gt;
itself as a Photo Sphere. This can be done with
the &lt;a href=&#34;http://owl.phy.queensu.ca/~phil/exiftool/&#34; target=&#34;_blank&#34;&gt;exiftool&lt;/a&gt; command line
tool. You&amp;rsquo;ll notice in the table above I&amp;rsquo;ve provided the appropriate commands to
run for each FOV. Copy the appropriate command and run it in your terminal&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:13&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:13&#34;&gt;9&lt;/a&gt;&lt;/sup&gt;. Be
sure to replace &lt;code&gt;path/to/image.jpg&lt;/code&gt; with the appropriate path to your image.&lt;/p&gt;

&lt;h3 id=&#34;uploading-to-facebook&#34;&gt;Uploading to Facebook&lt;/h3&gt;

&lt;p&gt;Finally! You&amp;rsquo;re ready to upload to facebook&amp;hellip;or are you? Well, you are, but
Facebook imposes the following restrictions:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;You can only upload to the web (desktop) version of Facebook&amp;hellip;&lt;/li&gt;
&lt;li&gt;&amp;hellip; and you have to post it directly to your timeline (you can&amp;rsquo;t add it to an
album directly&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:14&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:14&#34;&gt;10&lt;/a&gt;&lt;/sup&gt;)&lt;/li&gt;
&lt;li&gt;&amp;hellip; and you can only upload one panorama at a time.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If you follow all those steps, then it should totally work and you will end up
with an awesome Photo Sphere to share with all your friends.&lt;/p&gt;


&lt;figure &gt;
    &lt;a href=&#34;https://www.facebook.com/oderby/posts/10154843778091522&#34;&gt;
        &lt;img src=&#34;https://owenderby.com/img/panos/fb_photosphere.jpg&#34; alt=&#34;Click to view the photosphere on Facebook.&#34; width=&#34;100%&#34; /&gt;
    &lt;/a&gt;
    
    &lt;figcaption&gt;
        &lt;p&gt;
        Click to view the photosphere on Facebook.
        
            
        
        &lt;/p&gt; 
    &lt;/figcaption&gt;
    
&lt;/figure&gt;


&lt;h2 id=&#34;future-directions&#34;&gt;Future Directions&lt;/h2&gt;

&lt;p&gt;That&amp;rsquo;s it! I hope if you made it this far you found this guide useful, or at
least insightful&amp;hellip;&lt;/p&gt;

&lt;p&gt;If I have time, I&amp;rsquo;d like to investigate the following areas:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Investigate how to use &lt;a href=&#34;https://en.wikipedia.org/wiki/Bracketing&#34; target=&#34;_blank&#34;&gt;bracketing&lt;/a&gt;
to get a better overall exposure for the panoramas.&lt;/li&gt;
&lt;li&gt;What is lens &lt;a href=&#34;https://en.wikipedia.org/wiki/Vignetting&#34; target=&#34;_blank&#34;&gt;vignette&lt;/a&gt;, and do I
need to correct/remove it?&lt;/li&gt;
&lt;li&gt;I find the max 6000 pixel photo size imposed by facebook to be limiting. So
I&amp;rsquo;d like to investigate ways to provide my own 360° photo viewer, using
three.js. &lt;a href=&#34;https://threejs.org/examples/?q=panorama#webgl_panorama_equirectangular&#34; target=&#34;_blank&#34;&gt;This&lt;/a&gt; looks
promising.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:6&#34;&gt;Technically, a panorama using a spherical projection for viewing. Google calls these &amp;ldquo;Photo Spheres&amp;rdquo;, and that&amp;rsquo;s the term I&amp;rsquo;ll use. However, Facebook calls them &lt;a href=&#34;https://facebook360.fb.com/360-photos/&#34; target=&#34;_blank&#34;&gt;&amp;ldquo;360° photos&amp;rdquo;&lt;/a&gt;. I dislike this term because they&amp;rsquo;re not always 360° (in particular, for most panoramas you want to take with your DSLR.
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:6&#34;&gt;↩&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:1&#34;&gt;Alright, the only one I found that I actually tried. But after further searching, it seems to actually be the best one out there.
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:1&#34;&gt;↩&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:2&#34;&gt;I just fell, again, into the deep &lt;del&gt;trap&lt;/del&gt; rabbit hole again figuring out where to point to for a good summary document here&amp;hellip;
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:2&#34;&gt;↩&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:4&#34;&gt;Yes, that is the &lt;a href=&#34;https://en.wikipedia.org/wiki/CliffsNotes&#34; target=&#34;_blank&#34;&gt;correct spelling&lt;/a&gt;&amp;hellip;
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:4&#34;&gt;↩&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:5&#34;&gt;This is an area that, despite several attempts, I haven&amp;rsquo;t fully figured out yet. The focal length and other important lens information is always present in the photo EXIF data, but for some reason Hugin typically inputs some different values for focal length and focal length multiplier (crop factor), and I haven&amp;rsquo;t figured out why yet. Typically, just leaving those alone seems fine, but if my panorama isn&amp;rsquo;t aligning properly, I&amp;rsquo;ll try putting in the exact values from the EXIF data, and that does the trick.
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:5&#34;&gt;↩&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:8&#34;&gt;This is another area I don&amp;rsquo;t fully understand - how does Hugin estimate the field of view for the resulting panorama?? I&amp;rsquo;m pretty sure the math is outlined &lt;a href=&#34;http://wiki.panotools.org/DSLR_spherical_resolution&#34; target=&#34;_blank&#34;&gt;here&lt;/a&gt;, but I think that article is a bit muddled&amp;hellip;
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:8&#34;&gt;↩&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:12&#34;&gt;For uploading to Facebook. Although the result should work with any other Photo Sphere renderer, I haven&amp;rsquo;t tested it.
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:12&#34;&gt;↩&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:9&#34;&gt;This was an especially infuriating endeavor, as Facebook has &lt;a href=&#34;https://facebook360.fb.com/editing-360-photos-injecting-metadata/&#34; target=&#34;_blank&#34;&gt;detailed documentation&lt;/a&gt; on how to do it, but it&amp;rsquo;s focused mostly on producing 360° Photo Spheres using Photoshop. It took a lot of trial and error to figure out how to make it work for partial Photo Spheres.
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:9&#34;&gt;↩&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:13&#34;&gt;For the curious, this command specifies how to place our partial panorama inside a full spherical panorama (360° x 180°). See &lt;a href=&#34;https://developers.google.com/streetview/spherical-metadata#metadata_properties&#34; target=&#34;_blank&#34;&gt;here&lt;/a&gt; for further details and a nice illustration. The astute will observe that this is redundant with the work we already did to fit our original panorama into one of the predefined FOV Facebook specifies&amp;hellip;and all I can say is &amp;ldquo;Yes. Don&amp;rsquo;t ask.&amp;rdquo;
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:13&#34;&gt;↩&lt;/a&gt;&lt;/li&gt;
&lt;li id=&#34;fn:14&#34;&gt;Instead, you can move a photo from your timeline to an album. Just open the image, then go to Options &amp;gt; &amp;lsquo;Move to Other Album&amp;rsquo;.
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:14&#34;&gt;↩&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>